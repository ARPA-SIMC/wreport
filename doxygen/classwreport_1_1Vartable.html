<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libwreport: wreport::Vartable Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libwreport
   &#160;<span id="projectnumber">3.23</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacewreport.html">wreport</a></li><li class="navelem"><a class="el" href="classwreport_1_1Vartable.html">Vartable</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">wreport::Vartable Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Holds a variable information table.  
 <a href="classwreport_1_1Vartable.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="vartable_8h_source.html">vartable.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac6dbc240ad7a54b944fae79cbc870687"><td class="memItemLeft" align="right" valign="top"><a id="ac6dbc240ad7a54b944fae79cbc870687"></a>
virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwreport_1_1Vartable.html#ac6dbc240ad7a54b944fae79cbc870687">pathname</a> () const =0</td></tr>
<tr class="memdesc:ac6dbc240ad7a54b944fae79cbc870687"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the pathname of the file from which this table has been loaded. <br /></td></tr>
<tr class="separator:ac6dbc240ad7a54b944fae79cbc870687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a771570ad67d78fdde898070829e0b359"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacewreport.html#ab56051168442bfb0c18ef00affeb525a">Varinfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwreport_1_1Vartable.html#a771570ad67d78fdde898070829e0b359">query</a> (<a class="el" href="namespacewreport.html#af9fa16e12fde1ccfb4ce11b3988f5b05">Varcode</a> code) const =0</td></tr>
<tr class="memdesc:a771570ad67d78fdde898070829e0b359"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query the <a class="el" href="classwreport_1_1Vartable.html" title="Holds a variable information table. ">Vartable</a>.  <a href="#a771570ad67d78fdde898070829e0b359">More...</a><br /></td></tr>
<tr class="separator:a771570ad67d78fdde898070829e0b359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb44afe14c65bcceee080857c5762f40"><td class="memItemLeft" align="right" valign="top"><a id="afb44afe14c65bcceee080857c5762f40"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwreport_1_1Vartable.html#afb44afe14c65bcceee080857c5762f40">contains</a> (<a class="el" href="namespacewreport.html#af9fa16e12fde1ccfb4ce11b3988f5b05">Varcode</a> code) const =0</td></tr>
<tr class="memdesc:afb44afe14c65bcceee080857c5762f40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the code can be resolved to a varinfo. <br /></td></tr>
<tr class="separator:afb44afe14c65bcceee080857c5762f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f571569acc1daf9b1d5463879354982"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacewreport.html#ab56051168442bfb0c18ef00affeb525a">Varinfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwreport_1_1Vartable.html#a1f571569acc1daf9b1d5463879354982">query_altered</a> (<a class="el" href="namespacewreport.html#af9fa16e12fde1ccfb4ce11b3988f5b05">Varcode</a> code, int new_scale, unsigned new_bit_len, int new_bit_ref) const =0</td></tr>
<tr class="memdesc:a1f571569acc1daf9b1d5463879354982"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query an altered version of the vartable.  <a href="#a1f571569acc1daf9b1d5463879354982">More...</a><br /></td></tr>
<tr class="separator:a1f571569acc1daf9b1d5463879354982"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac695e35e38c5f67614f09514f8593de6"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwreport_1_1Vartable.html#ac695e35e38c5f67614f09514f8593de6">iterate</a> (std::function&lt; bool(<a class="el" href="namespacewreport.html#ab56051168442bfb0c18ef00affeb525a">Varinfo</a>)&gt; dest) const =0</td></tr>
<tr class="memdesc:ac695e35e38c5f67614f09514f8593de6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate the whole contents of the table.  <a href="#ac695e35e38c5f67614f09514f8593de6">More...</a><br /></td></tr>
<tr class="separator:ac695e35e38c5f67614f09514f8593de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a34d0186c87bce3cf2e319ba2780dbc5c"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classwreport_1_1Vartable.html">Vartable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwreport_1_1Vartable.html#a34d0186c87bce3cf2e319ba2780dbc5c">load_bufr</a> (const std::string &amp;<a class="el" href="classwreport_1_1Vartable.html#ac6dbc240ad7a54b944fae79cbc870687">pathname</a>)</td></tr>
<tr class="memdesc:a34d0186c87bce3cf2e319ba2780dbc5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a BUFR vartable, by file name.  <a href="#a34d0186c87bce3cf2e319ba2780dbc5c">More...</a><br /></td></tr>
<tr class="separator:a34d0186c87bce3cf2e319ba2780dbc5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44959a807ee89a9bf3e4585c42e7dd1f"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classwreport_1_1Vartable.html">Vartable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwreport_1_1Vartable.html#a44959a807ee89a9bf3e4585c42e7dd1f">load_crex</a> (const std::string &amp;<a class="el" href="classwreport_1_1Vartable.html#ac6dbc240ad7a54b944fae79cbc870687">pathname</a>)</td></tr>
<tr class="memdesc:a44959a807ee89a9bf3e4585c42e7dd1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a CREX vartable, by file name.  <a href="#a44959a807ee89a9bf3e4585c42e7dd1f">More...</a><br /></td></tr>
<tr class="separator:a44959a807ee89a9bf3e4585c42e7dd1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84415c9aa2226382fd459995372f799f"><td class="memItemLeft" align="right" valign="top"><a id="a84415c9aa2226382fd459995372f799f"></a>
static const <a class="el" href="classwreport_1_1Vartable.html">Vartable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwreport_1_1Vartable.html#a84415c9aa2226382fd459995372f799f">get_bufr</a> (const <a class="el" href="classwreport_1_1BufrTableID.html">BufrTableID</a> &amp;id)</td></tr>
<tr class="memdesc:a84415c9aa2226382fd459995372f799f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a BUFR table. <br /></td></tr>
<tr class="separator:a84415c9aa2226382fd459995372f799f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42b15e8f3fcb3ad66fcb775100783ef8"><td class="memItemLeft" align="right" valign="top"><a id="a42b15e8f3fcb3ad66fcb775100783ef8"></a>
static const <a class="el" href="classwreport_1_1Vartable.html">Vartable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwreport_1_1Vartable.html#a42b15e8f3fcb3ad66fcb775100783ef8">get_crex</a> (const <a class="el" href="classwreport_1_1CrexTableID.html">CrexTableID</a> &amp;id)</td></tr>
<tr class="memdesc:a42b15e8f3fcb3ad66fcb775100783ef8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a CREX table. <br /></td></tr>
<tr class="separator:a42b15e8f3fcb3ad66fcb775100783ef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a326bc3fa2d05ea27519b089635ac5584"><td class="memItemLeft" align="right" valign="top"><a id="a326bc3fa2d05ea27519b089635ac5584"></a>
static const <a class="el" href="classwreport_1_1Vartable.html">Vartable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwreport_1_1Vartable.html#a326bc3fa2d05ea27519b089635ac5584">get_bufr</a> (const std::string &amp;basename)</td></tr>
<tr class="memdesc:a326bc3fa2d05ea27519b089635ac5584"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a BUFR table, by file name (without extension) <br /></td></tr>
<tr class="separator:a326bc3fa2d05ea27519b089635ac5584"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0505b124072313d80f530ff4735f9227"><td class="memItemLeft" align="right" valign="top"><a id="a0505b124072313d80f530ff4735f9227"></a>
static const <a class="el" href="classwreport_1_1Vartable.html">Vartable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwreport_1_1Vartable.html#a0505b124072313d80f530ff4735f9227">get_crex</a> (const std::string &amp;basename)</td></tr>
<tr class="memdesc:a0505b124072313d80f530ff4735f9227"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a CREX table, by file name (without extension) <br /></td></tr>
<tr class="separator:a0505b124072313d80f530ff4735f9227"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Holds a variable information table. </p>
<p>It never needs to be deallocated, as all the <a class="el" href="classwreport_1_1Vartable.html" title="Holds a variable information table. ">Vartable</a> returned by wreport are pointers to memory-cached versions that are guaranteed to exist for all the lifetime of the program.</p>
<p>There are many B tables with slight differences used by different meteorological centre or equipment. This module allows to access different vartables using Vartable::get().</p>
<p><a class="el" href="classwreport_1_1Vartable.html" title="Holds a variable information table. ">Vartable</a> and Varinfo have special memory management: they are never deallocated. This is an explicit design choice to speed up passing and copying Varinfo values, that are used very intensely as they accompany all the physical values processed by wreport. This behaviour should not be a cause of memory leaks, since a software would only need to access a limited amount of distinct variable informations during its lifetime. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac695e35e38c5f67614f09514f8593de6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac695e35e38c5f67614f09514f8593de6">&#9670;&nbsp;</a></span>iterate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool wreport::Vartable::iterate </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(<a class="el" href="namespacewreport.html#ab56051168442bfb0c18ef00affeb525a">Varinfo</a>)&gt;&#160;</td>
          <td class="paramname"><em>dest</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Iterate the whole contents of the table. </p>
<p>Return false from dest to stop iteration.</p>
<dl class="section return"><dt>Returns</dt><dd>true if iteration ended normally, false if dest returned false. </dd></dl>

</div>
</div>
<a id="a34d0186c87bce3cf2e319ba2780dbc5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34d0186c87bce3cf2e319ba2780dbc5c">&#9670;&nbsp;</a></span>load_bufr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="classwreport_1_1Vartable.html">Vartable</a>* wreport::Vartable::load_bufr </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pathname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a BUFR vartable, by file name. </p>
<p>Once loaded, the table will be cached in memory for reuse, and further calls to <a class="el" href="classwreport_1_1Vartable.html#a34d0186c87bce3cf2e319ba2780dbc5c" title="Return a BUFR vartable, by file name. ">load_bufr()</a> will return the cached version. </p>

</div>
</div>
<a id="a44959a807ee89a9bf3e4585c42e7dd1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44959a807ee89a9bf3e4585c42e7dd1f">&#9670;&nbsp;</a></span>load_crex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="classwreport_1_1Vartable.html">Vartable</a>* wreport::Vartable::load_crex </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pathname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a CREX vartable, by file name. </p>
<p>Once loaded, the table will be cached in memory for reuse, and further calls to <a class="el" href="classwreport_1_1Vartable.html#a44959a807ee89a9bf3e4585c42e7dd1f" title="Return a CREX vartable, by file name. ">load_crex()</a> will return the cached version. </p>

</div>
</div>
<a id="a771570ad67d78fdde898070829e0b359"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a771570ad67d78fdde898070829e0b359">&#9670;&nbsp;</a></span>query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacewreport.html#ab56051168442bfb0c18ef00affeb525a">Varinfo</a> wreport::Vartable::query </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacewreport.html#af9fa16e12fde1ccfb4ce11b3988f5b05">Varcode</a>&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Query the <a class="el" href="classwreport_1_1Vartable.html" title="Holds a variable information table. ">Vartable</a>. </p>
<p>Throws an exception if not found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td><a class="el" href="namespacewreport.html#af9fa16e12fde1ccfb4ce11b3988f5b05" title="Holds the WMO variable code of a variable. ">wreport::Varcode</a> to query </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the wreport::varinfo with the results of the query. </dd></dl>

</div>
</div>
<a id="a1f571569acc1daf9b1d5463879354982"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f571569acc1daf9b1d5463879354982">&#9670;&nbsp;</a></span>query_altered()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacewreport.html#ab56051168442bfb0c18ef00affeb525a">Varinfo</a> wreport::Vartable::query_altered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacewreport.html#af9fa16e12fde1ccfb4ce11b3988f5b05">Varcode</a>&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>new_bit_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_bit_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Query an altered version of the vartable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td><a class="el" href="namespacewreport.html#af9fa16e12fde1ccfb4ce11b3988f5b05" title="Holds the WMO variable code of a variable. ">wreport::Varcode</a> to query </td></tr>
    <tr><td class="paramname">new_scale</td><td>Scale to use instead of the default </td></tr>
    <tr><td class="paramname">new_bit_len</td><td>Bit length to use instead of the default </td></tr>
    <tr><td class="paramname">new_bit_ref</td><td>bit_ref to use instead of the default </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the <a class="el" href="namespacewreport.html#ab56051168442bfb0c18ef00affeb525a" title="Varinfo reference. ">wreport::Varinfo</a> with the results of the query. The resulting Varinfo is stored inside the <a class="el" href="classwreport_1_1Vartable.html" title="Holds a variable information table. ">Vartable</a>, can be freely copied around and does not need to be deallocated. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="vartable_8h_source.html">vartable.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Sep 11 2019 15:13:19 for libwreport by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
